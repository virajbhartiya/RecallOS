# =============================================================================
# Cognia API Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000

# HTTPS Configuration (for development)
HTTPS_ENABLE=false
HTTPS_KEY_PATH=./certs/api.cognia.test+3-key.pem
HTTPS_CERT_PATH=./certs/api.cognia.test+3.pem

# Disable colors in logs (set to 1 to disable)
NO_COLOR=0

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://[user]:[password]@[host]:[port]/[database]
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/cognia

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Option 1: Use Redis URL (recommended for cloud Redis)
REDIS_URL=redis://localhost:6379

# Option 2: Use individual connection parameters
# REDIS_HOST=127.0.0.1
# REDIS_PORT=6379
# REDIS_USERNAME=
# REDIS_PASSWORD=

# Redis command timeout in milliseconds (default: 60000 = 60 seconds)
REDIS_COMMAND_TIMEOUT_MS=60000

# -----------------------------------------------------------------------------
# Qdrant Vector Database Configuration
# -----------------------------------------------------------------------------
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
EMBEDDING_DIMENSION=768

# -----------------------------------------------------------------------------
# AI Provider Configuration
# -----------------------------------------------------------------------------
# AI Provider: 'gemini', 'ollama', or 'hybrid' (default: 'hybrid')
AI_PROVIDER=hybrid

# Gemini API Configuration
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_EMBED_MODEL=text-embedding-004

# Ollama Configuration (for local AI models)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBED_MODEL=all-minilm:l6-v2
OLLAMA_GEN_MODEL=llama3.1:8b

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# CORS & Security Configuration
# -----------------------------------------------------------------------------
# Cookie domain (default: '.cognia.xyz')
COOKIE_DOMAIN=.cognia.xyz

# Session cookie name (default: 'cognia_session')
SESSION_COOKIE_NAME=cognia_session

# Cookie secure flag (default: true)
# Set to 'false' for development over HTTP
COOKIE_SECURE=true

# CORS allowed origins (comma-separated)
# Example: http://localhost:5173,https://app.cognia.xyz
CORS_ALLOWED_ORIGINS=

# Chrome extension IDs (comma-separated)
# Example: abcdefghijklmnopqrstuvwxyz123456,chrome-extension://abcdefghijklmnopqrstuvwxyz123456
EXTENSION_IDS=

# -----------------------------------------------------------------------------
# Request Timeouts (in milliseconds)
# -----------------------------------------------------------------------------
# General request timeout (default: 60000 = 60 seconds)
REQUEST_TIMEOUT_MS=60000

# Search request timeout (default: 360000 = 6 minutes)
SEARCH_TIMEOUT_MS=360000

# Insights generation timeout (default: 360000 = 6 minutes)
INSIGHTS_TIMEOUT_MS=360000

# Email draft generation timeout (default: 360000 = 6 minutes)
EMAIL_DRAFT_TIMEOUT_MS=360000

# -----------------------------------------------------------------------------
# Queue Configuration (BullMQ)
# -----------------------------------------------------------------------------
# Queue rate limiter: max jobs per duration
QUEUE_RATE_MAX=10
QUEUE_RATE_DURATION_MS=60000

# Queue concurrency (number of jobs processed simultaneously)
QUEUE_CONCURRENCY=1

# Queue stalled interval in milliseconds (default: 300000 = 5 minutes)
QUEUE_STALLED_INTERVAL_MS=300000

# Maximum number of times a job can be stalled before failing (default: 10)
QUEUE_MAX_STALLED_COUNT=10

# -----------------------------------------------------------------------------
# Search Configuration
# -----------------------------------------------------------------------------
# Default number of results to return (default: 50)
SEARCH_TOP_K=50

# Maximum number of results allowed (default: 1000)
SEARCH_MAX_LIMIT=1000

# Enable reasoning in search (default: true, set to 'false' to disable)
SEARCH_ENABLE_REASONING=true

# Salt for search embedding hashing (default: 'cognia')
SEARCH_EMBED_SALT=cognia

# -----------------------------------------------------------------------------
# Memory Configuration
# -----------------------------------------------------------------------------
# Memory decay half-life in days (default: 21)
MEMORY_DECAY_HALF_LIFE_DAYS=21

# Profile importance threshold (default: 0.7)
# Memories with importance score above this threshold are included in profile
PROFILE_IMPORTANCE_THRESHOLD=0.7

# -----------------------------------------------------------------------------
# Profile Worker Configuration
# -----------------------------------------------------------------------------
# Days since last update to trigger profile update (default: 7)
PROFILE_UPDATE_INTERVAL_DAYS=7

# Hours between profile update cycles (default: 24)
PROFILE_UPDATE_CYCLE_HOURS=24

# Hours to wait before retrying profile update for users with no memories (default: 6)
PROFILE_NO_MEMORIES_COOLDOWN_HOURS=6

# -----------------------------------------------------------------------------
# Insights Worker Configuration
# -----------------------------------------------------------------------------
# Hours between daily insights generation (default: 24)
INSIGHTS_DAILY_INTERVAL_HOURS=24

# Hours between weekly insights generation (default: 168 = 7 days)
INSIGHTS_WEEKLY_INTERVAL_HOURS=168

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Logger output mode: 'print', 'log', 'both', or 'none' (default: 'log')
LOGGER_OUTPUT_MODE=log

# Morgan (HTTP logging) output mode: 'print', 'log', 'both', or 'none' (default: 'print')
MORGAN_OUTPUT_MODE=print

# Log file path (default: './logs/app.log')
LOG_FILE_PATH=./logs/app.log

# -----------------------------------------------------------------------------
# Performance Profile
# -----------------------------------------------------------------------------
# Performance profile: 'minimal', 'standard', or 'full' (default: 'full')
COGNIA_PROFILE=full
